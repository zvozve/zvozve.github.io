---
title: 常用指令
auther: zvozve
comments: false
date: 2024-04-28 17:52:31
categories: FFMPEG
tags:
  - FFMPEG
---
# 视频

## 格式

**flv 2 MP4**   
  
```shell   
ffmpeg -i filename.flv -c:v libx264 -crf 19 -strict experimental filename.mp4   
```

**mov 2 MP4**  
```shell
ffmpeg -i old.mov -vcodec libx264 -preset fast -crf 20 -y -vf "scale=1920:trunc(ow/a/2)*2" -acodec libmp3lame -ab 128k new.mp4
```
**mkv 2 mp4**   
  
```shell
ffmpeg -i filename.mkv -vcodec copy -acodec copy filename.mp4   
```
  
**rm 2 mp4**   
  
```shell
ffmpeg -i filename.rmvb -c:v libx264 -strict -2 filename.mp4   
```

**ts 2 mp4**   
  
```shell
ffmpeg -i filename.ts -c copy -map 0:v -map 0:a -bsf:a aac_adtstoasc filename.mp4 
```

**wmv 2 MP4**   
  
```shell
ffmpeg -i filename.wmv filename.mp4   
```
  
## 尺寸
  
```shell
# 如何使用 FFmpeg 在保持高质量的同时调整视频大小
ffmpeg -i input.mp4 -vf scale=1280:720 -preset slow -crf 18 output.mp4
```

## 修复

**修复MP4**
  
```shell
ffmpeg -i filename.mp4 -codec copy filename.mp4   
```
  
## 剪辑
  
```shell
ffmpeg -i filename.mp4 -ss 00:10:02 -to 00:41:39 filename1.mp4   
```
  
```shell
ffmpeg -i filename.mp4 -codec copy filename.mp4   
```

## 字幕

**将字幕封装到容器中** 
```shell
ffmpeg -i input.mp4 -i subtitles.srt -c copy output.mp4
 ```

**从容器中提取字幕流** 
```shell
ffmpeg -i input.mp4 output.srt
```

**字幕格式转换**
```shell
fimpeg -i a.ass b.srt ffmpeg -i c.vtt d.srt ffmpeg -i e.lyric f.srt
```

**将 input.mp4 中的字幕（默认）嵌入到output.mp4 文件**
```shell
ffmpeg -i input.mp4 -vf subtitles=input.mp4 output.mp4 
```

**将input.mp4 中的字幕（第二个）嵌入到output.mp4 文件**
```shell
 ffmpeg -i input.mp4 -vf subtitles=input.mkv:si=1 output.mp4
```

# 音频

**提取MP3**   

```shell
ffmpeg -i filename.mp4 -f mp3 -vn filename.mp3   
```
  
**转MP3为wav**
```shell
ffmpeg -i input.mp3 -acodec pcm_s16le -ac 1 -ar 8000 output.wav
```

**转m4a为wav**
```shell
ffmpeg -i input.m4a -acodec pcm_s16le -ac 1 -ar 8000 output.wav
```

**wav与PCM的相互转换**
```shell
ffmpeg -iinput.wav -f s16le -ar 8000 -acodec pcm_s16le output.raw
```

**PCM转wav**
```shell
ffmpeg -f s16le -ar 8000-ac 1 -acodec pcm_s16le -i input.raw output.wav
```
# 合并音视频
  
```   
ffmpeg -i filename.mp4 -i filename.m4a -c:v copy -c:a aac -strict experimental filename.mp4   
```

```c
注：
-acodec pcm_s16le pcm_s16le 16bits 编码器
-f s16le 保存为16bits pcm格式
-ac 1 单声道
-ar 8000 8000采样率
```


**参考：**
[ffmpeg命令 音频文件格式转换](https://blog.csdn.net/qq_39516859/article/details/85615615)
